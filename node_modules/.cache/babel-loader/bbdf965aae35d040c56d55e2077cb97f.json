{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/marcos/\\xC1rea de Trabalho/World Products/World Products/src/components/Profile/Setings/Settings.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useState, createContext, useContext, useEffect } from 'react';\nimport Header from '../../Header/header';\nimport estilo from './estyle.js';\nimport Avatar from '@material-ui/core/Avatar';\nimport IconButton from '@material-ui/core/IconButton';\nimport TextField from '@material-ui/core/TextField';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport Button from '@material-ui/core/Button';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport api from '../../../Services/userServer';\nexport const profileImg = /*#__PURE__*/createContext();\nexport const Profile = props => {\n  _s();\n\n  const profile = JSON.parse(localStorage.getItem('login'));\n  const imageProfile = profile.image;\n  const [image, setImage] = useState(imageProfile);\n  return /*#__PURE__*/_jsxDEV(profileImg.Provider, {\n    value: {\n      image,\n      setImage\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 23,\n    columnNumber: 13\n  }, this);\n};\n\n_s(Profile, \"2d5z729xO0sbq8e9/yV6M613Zto=\");\n\n_c = Profile;\n\nconst Settings = () => {\n  _s2();\n\n  const imagem = useContext(profileImg);\n  const classes = estilo();\n  const [account, setAccount] = useState();\n  const [msg, setMsg] = useState();\n  const [result, setResult] = useState();\n  const [values, setValues] = useState({\n    Email: '',\n    Profile: ''\n  });\n\n  const handleChange = ev => {\n    const {\n      name,\n      value\n    } = ev.target;\n    setValues({ ...values,\n      [name]: value\n    });\n  };\n\n  const handleSubmit = async ev => {\n    ev.preventDefault();\n    imagem.setImage(values.Profile); //BUSCANDO DADOS DO USUÁRIO NON CACHE\n\n    const user = JSON.parse(localStorage.getItem('login'));\n    const userId = user.id;\n    user.image = values.Profile; //BUSCANDO DADOS DO USUÁRIO NO 'BANCO DE DADOS'\n\n    async function buscarUser() {\n      const response = await api.get(`/users`);\n      const resposta = response.data;\n      const usuario = resposta.filter(e => {\n        return e.email === values.Email;\n      });\n      usuario[0] ? setAccount(true) : setAccount(false);\n      usuario[0] ? setMsg('Já existe uma conta cadastrada com este email , digite um email novo') : setMsg('Email atualizado');\n      usuario[0] ? setRetorno('error') : setRetorno('success');\n    }\n\n    buscarUser();\n    account === false && (await api.put(`/users/${userId}`, user));\n    console.log(imagem.image);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.main,\n      children: /*#__PURE__*/_jsxDEV(IconButton, {\n        color: \"primary\",\n        \"aria-label\": \"upload picture\",\n        component: \"span\",\n        children: /*#__PURE__*/_jsxDEV(Avatar, {\n          className: classes.profileImg,\n          src: imagem.image\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.content,\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        className: classes.form,\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          className: classes.account,\n          id: \"account\",\n          label: \"Email\",\n          name: \"Email\",\n          placeholder: \"Altere seu email\",\n          variant: \"outlined\",\n          onChange: handleChange,\n          InputProps: {\n            startAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n              position: \"start\",\n              children: /*#__PURE__*/_jsxDEV(AccountCircle, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 106,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 29\n            }, this)\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          className: classes.imageLink,\n          id: \"image\",\n          label: \"Imagem de perfil\",\n          name: \"Profile\",\n          placeholder: \"cole aqui o link da sua imagem\",\n          variant: \"outlined\",\n          onChange: handleChange // InputProps={{\n          // startAdornment: (\n          //     <InputAdornment position=\"start\">\n          //     </InputAdornment>\n          // ),\n          // }}\n\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          className: classes.btn,\n          variant: \"outlined\",\n          color: \"primary\",\n          type: \"submit\",\n          children: \"Atualizar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 13\n  }, this);\n};\n\n_s2(Settings, \"G++L0XmtuXRu41asExgJK5JB+r8=\");\n\n_c2 = Settings;\nexport default Settings;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Profile\");\n$RefreshReg$(_c2, \"Settings\");","map":{"version":3,"sources":["/home/marcos/Área de Trabalho/World Products/World Products/src/components/Profile/Setings/Settings.js"],"names":["React","useState","createContext","useContext","useEffect","Header","estilo","Avatar","IconButton","TextField","InputAdornment","Button","AccountCircle","api","profileImg","Profile","props","profile","JSON","parse","localStorage","getItem","imageProfile","image","setImage","children","Settings","imagem","classes","account","setAccount","msg","setMsg","result","setResult","values","setValues","Email","handleChange","ev","name","value","target","handleSubmit","preventDefault","user","userId","id","buscarUser","response","get","resposta","data","usuario","filter","e","email","setRetorno","put","console","log","main","content","form","startAdornment","imageLink","btn"],"mappings":"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","sourcesContent":["import React, { useState,createContext,useContext, useEffect } from 'react';\nimport Header from '../../Header/header';\nimport estilo from './estyle.js'\nimport Avatar from '@material-ui/core/Avatar'\nimport IconButton from '@material-ui/core/IconButton'\nimport TextField from '@material-ui/core/TextField';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport Button from '@material-ui/core/Button'\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport api from '../../../Services/userServer'\n\nexport const profileImg = createContext()\n\n\nexport const Profile = (props) =>{\n\n    const  profile = (JSON.parse(localStorage.getItem('login')))\n    const   imageProfile = profile.image\n\n    const [image,setImage] = useState(imageProfile)\n\n        return(\n            <profileImg.Provider \n                value={{image,setImage}}\n            >\n                {props.children}\n            </profileImg.Provider>\n        )\n}\n\n\n\nconst Settings = () => {\n        const imagem = useContext(profileImg)\n        const classes = estilo()\n        const [account , setAccount] = useState()\n        const [msg , setMsg] = useState()\n        const [result , setResult ] = useState()\n\n        const [values, setValues]  =useState({\n            Email:'',\n            Profile:''\n        })\n\n        const handleChange = (ev) =>{\n            const {name, value} = ev.target;\n            setValues({...values , [name]:value })\n\n        }\n        const handleSubmit = async (ev)=> {\n                ev.preventDefault();\n                imagem.setImage(values.Profile)\n                //BUSCANDO DADOS DO USUÁRIO NON CACHE\n                const user = (JSON.parse(localStorage.getItem('login')))\n                const userId = user.id\n                user.image = values.Profile\n\n                //BUSCANDO DADOS DO USUÁRIO NO 'BANCO DE DADOS'\n                    \n                    async function buscarUser(){\n\n                        const response = await api.get(`/users`)\n                        const resposta = response.data;\n                        const usuario = resposta.filter( e =>{\n                            return(e.email === values.Email)\n                        })\n                   \n                        usuario[0] ? setAccount(true) : setAccount(false)\n                        usuario[0] ? setMsg('Já existe uma conta cadastrada com este email , digite um email novo') : setMsg('Email atualizado')\n                        usuario[0] ? setRetorno ('error') : setRetorno('success')\n\n                    }\n\n                 buscarUser()\n\n                account === false &&   await api.put(`/users/${userId}`,user )\n                console.log(imagem.image)\n\n        }\n\n        return(\n\n            <div>\n                <Header/>\n                <div className={classes.main}>\n        \n                    <IconButton color=\"primary\" aria-label=\"upload picture\" component=\"span\">\n                        <Avatar className={classes.profileImg} src={imagem.image}/>\n                    </IconButton>\n                </div>\n                <div className={classes.content}>\n\n                    <form  className={classes.form} onSubmit={handleSubmit}>\n                        <TextField\n                        \n                        className={classes.account}\n                        id=\"account\"\n                        label=\"Email\"\n                        name='Email'\n                        placeholder='Altere seu email'\n                        variant='outlined'\n                        onChange={handleChange}\n                        InputProps={{\n                        startAdornment: (\n                            <InputAdornment position=\"start\">\n                                <AccountCircle />\n                            </InputAdornment>\n                        ),\n                        }}\n                    />\n                    <TextField\n                        \n                        className={classes.imageLink}\n                        id=\"image\"\n                        label=\"Imagem de perfil\"\n                        name='Profile'\n                        placeholder='cole aqui o link da sua imagem'\n                        variant='outlined'\n                        onChange={handleChange}\n                        // InputProps={{\n                        // startAdornment: (\n                        //     <InputAdornment position=\"start\">\n                                \n                        //     </InputAdornment>\n                        // ),\n                        // }}\n                    />\n                    <Button className={classes.btn} variant='outlined' color='primary' type='submit' >\n                        Atualizar\n                    </Button>\n                    </form>\n                   \n                </div>\n            </div>\n        )\n\n\n\n};\n\nexport default Settings;\n"]},"metadata":{},"sourceType":"module"}